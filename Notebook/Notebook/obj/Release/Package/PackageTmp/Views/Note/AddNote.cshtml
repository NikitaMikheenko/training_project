@model Common.NoteAddModel

@{
    Layout = ViewBag.Layout;
}

<div id="note">
    @using (Html.BeginForm("AddNote", "Note", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
        @Html.AntiForgeryToken()

        @Html.ValidationSummary(true, "", new { @class = "" })

        @Html.HiddenFor(model => model.User.Login)

        <div>
            @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "" })
            <div>
                @Html.EditorFor(model => model.Name)
                @Html.ValidationMessageFor(model => model.Name, "", new { @class = "" })
            </div>
        </div>

        <div>
            <lable>Category</lable>
            <select name="CategoryId">
                @foreach (var item in Model.Categories)
                {
                    <option value="@item.Id">@item.Name</option>
                    <lable>@item.Name</lable>
                }
            </select>
        </div>

        <div>
            @Html.LabelFor(model => model.Description, htmlAttributes: new { @class = "" })
            <div>
                @Html.EditorFor(model => model.Description)
                @Html.ValidationMessageFor(model => model.Description, "", new { @class = "" })
            </div>
        </div>

        <input type="file" name="ImgFile" accept="image/*" />

        <div>
            <span>Add note link</span>
            <table>
                <tr>
                    <th></th>
                    <th>
                        Note name
                    </th>
                    <th>
                        Date
                    </th>
                    <th>
                        Category
                    </th>
                </tr>
                @if (Model.Notes != null)
                {
                    for (int i = 0; i < Model.Notes.Count; i++)
                    {
                        @Html.HiddenFor(model => model.Notes[i].Id)
                        <tr>
                            <td>@Html.CheckBoxFor(model => model.Checked[i])</td>
                            <td>@Model.Notes[i].Name</td>
                            <td>@Model.Notes[i].Date.Year-@Model.Notes[i].Date.Month-@Model.Notes[i].Date.Day</td>
                            <td>@Model.Notes[i].Category.Name</td>
                        </tr>
                    }
                }
            </table>
        </div>

        <div>
            <input type="submit" value="Add" />
        </div>
    }
</div>

<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>